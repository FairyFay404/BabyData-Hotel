<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">



<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Analyze Promotion</title>
        <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
       
    </head>
<body>
    <div class="max-w-10xl mx-auto px-10 sm:px-10"></div>
    <div class="items-center border-gray-100 py-6 md:justify-start  text-white bg-cyan-600">
      <div class="flex justify-start lg:w-0 lg:flex-2">
          <span class="sr-only">Workflow</span>
          &emsp;&emsp;&emsp;&emsp;
          <button onclick="window.location = 'https\:/\/a7.cpe231.kmutt.in.th/Owner.html';" class="navbar-brand flex  text-2xl font-extrabold" >BabyData.com&nbsp&nbsp&nbsp</button>
          <a class="navbar-brand flex  text-2xl font-extrabold">&nbsp|&nbsp&nbsp&nbsp&nbspAnalyze&nbspPromotion</a>
      </div>
    </div><br>
    <div class="mt-2 md:mt-0 md:col-span-2"></div>
    <div class="shadow overflow-hidden sm:rounded-md"></div>
    <div class=" ml-16 flex justify-left"> 
    
    <label for="last-name" class="block text-medium font-medium text-gray-700">
            
        Promotion&nbsp;ID&emsp;</label></div>
    
    
    <div class="ml-16 flex justify-left"> 
        
        <div class="grid grid-cols-6 gap-6">
        <input type="text" name="search" id="search" autocomplete="family-name" class="sm:col-span-2 mt-1 focus:ring-cyan-600 focus:border-cyan-600 block w-full shadow-sm sm:text-medium border-gray-300 rounded-md" placeholder="Search">
        <button type="submit" class="inline-flex justify-center py-2 px-8 border border-transparent shadow-sm text-medium font-medium rounded-md text-white bg-cyan-600 hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-600">Search</button>
        </div>
       
    </div>
    <div class="mt-10 sm:mt-0">
        <div class="px-10 md:grid md:grid-cols-1 md:gap-1">
          <div class="md:col-span-1">
          </div>
          <div class="mt-3 md:mt-0 md:col-span-2">
            <form action="#" method="POST">
              <div class="mt-4 shadow overflow-hidden sm:rounded-md">
      
            <div class="border-t border-gray-200">   
      
                  <div class="mt-4 px-4 flex justify-center"> 
                    <div class="layout" style="width: 100%;">
        
    <table class="table table-bordered table-striped">
        <thead>
          <tr class="table-primary ">
            
            <th scope="col">Promotion_ID</th>
            <th scope="col">discount</th>
            <th scope="col">Category</th>
            <th scope="col">Count</th>

          </tr>
        </thead>
        <tbody id="myTable">
          
        </tbody>
      </table>
    </div>
    </div>
    </div>
    <script>
        let text = localStorage.getItem('username');
        const logindata = JSON.parse(text);
        if(logindata.role != 'Owner'){
          window.location = 'https://a7.cpe231.kmutt.in.th/Login.html';
        }

        fetch('http://localhost:3333/analyzepromotion')
        .then(response => response.json())
        .then(data => {
          console.log(data)
          var table = document.getElementById('myTable')
  
          for(let i=0;i<data.numbook.length;i++){
            var row = "<tr> <td>"+data.idbook[i]+"</td> <td>"+data.catbook[i]+"</td> <td>"+data.disbook[i]+"</td> <td>"+data.numbook[i]+"</td> </tr>" ;
            table.innerHTML += row;

          }
          for(let i=0;i<data.numact.length;i++){
            var row = "<tr> <td>"+data.idact[i]+"</td> <td>"+data.catact[i]+"</td> <td>"+data.disact[i]+"</td> <td>"+data.numact[i]+"</td> </tr>" ;
            table.innerHTML += row;

          }
          for(let i=0;i<data.numfood.length;i++){
            var row = "<tr> <td>"+data.idfood[i]+"</td> <td>"+data.catfood[i]+"</td> <td>"+data.disfood[i]+"</td> <td>"+data.numfood[i]+"</td> </tr>" ;
            table.innerHTML += row;

          }
            
            

        })
        .catch((error) => {
          console.error('Error:', error);
        });
    

        res.json({numbook,numact,numfood,idbook,catbook,disbook,idact,catact,disact,idfood,catfood,disfood})

    </script>
</div>
</dl>
</div>
</div>
</div>
</div>
</body>
</html>

